<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Home Manager &middot; Gunwant Jain - @wantguns</title>
    <meta name="description" content="Gunwant Jain&amp;#x27;s (@wantguns) writings and musings" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://wantguns.dev/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://wantguns.dev/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://wantguns.dev/favicon-16x16.png" />
    <link rel="manifest" href="https://wantguns.dev/site.webmanifest" />
    <link rel="alternate" type="application/atom+xml" title="RSS" href="https://wantguns.dev/atom.xml">

    <style>@import url("/fonts/cmuserif_roman_macroman/stylesheet.css");@import url("/fonts/cmutypewritertext_light_macroman/stylesheet.css");:root{color-scheme:dark}html,body{background:#000;color:rgba(255,255,255,.9);padding:.3rem;margin:.3rem;text-rendering:optimizeLegibility;font-variant-ligatures:contextual;font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;font-size:16.5px}h1,h2,h3,h4,h5,h6{color:#fbcb97;font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif}h1.page_title{font-size:200%;line-height:normal;color:#fbcb97;margin-bottom:1rem;line-height:1.1}a{text-decoration:underline;text-underline-offset:3px;color:rgba(255,255,255,.9)}a:active{color:#fbcb97}a:hover{color:rgba(251,203,151,.9)}a.site_title{text-decoration:none;color:#e78a53;list-style:1}a.site_title:hover{text-decoration:underline}a.site_nav{text-decoration:none;color:#e78a53}a.site_nav:hover{text-decoration:underline}a.homepage-list_title{flex:1;word-wrap:break-word;text-decoration:none;font-weight:bold;font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;color:#fbcb97}a.homepage-list_title:hover{text-decoration:underline}a code{text-decoration-color:rgba(251,203,151,.9)}a.footer{color:#888}a.footer:hover{color:#fbcb97}.pipe{color:#202020}time.site_time{font-size:90%;color:#888}span.page_time{padding:1.2rem auto;color:#888}:target{background-color:#000}hr{border:none;height:1px;background-color:#202020}::selection{background:#333}main{margin:auto;max-width:650px}header{padding-top:1rem;padding-bottom:0rem;font-weight:900}code{font-family:cmu_typewriter_textlight,ui-monospace,"SFMono-Regular","SF Mono","Cascadia Code","Source Code Pro",Menlo,Consolas,"DejaVu Sans Mono",monospace;color:rgba(251,203,151,.9)}code a{text-decoration-color:rgba(251,203,151,.9)}pre{position:relative;font-family:cmu_typewriter_textlight,ui-monospace,"SFMono-Regular","SF Mono","Cascadia Code","Source Code Pro",Menlo,Consolas,"DejaVu Sans Mono",monospace;overflow:auto;border:thin solid #202020;margin:2rem 0rem;padding:1.5rem;background-color:#000}pre code{padding:initial;color:inherit;background-color:inherit}.pre-wrapper{position:relative;margin:2rem 0}.copy-button{position:absolute;top:0px;right:0px;color:#fbcb97;background-color:#000;border:thin solid #202020;width:60px;height:28px;padding:5px 10px;font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;cursor:pointer;opacity:.8;transition:all .1s ease}.copy-button:hover{opacity:1}.copy-button.copied{border:thin solid #fbcb97}table{border-collapse:collapse;width:100%}th,td{border:1px solid #202020;padding:1.1rem}img{height:auto;margin:2rem 0rem;max-width:100%}.homepage-list,.taxonomies__list{list-style:none;padding:1rem 0}.homepage-list li,.taxonomies__list li{align-items:center;display:flex;flex-wrap:nowrap;justify-content:space-between;margin-bottom:10px}.center{margin-left:auto;margin-right:auto;max-width:100%;text-align:center}.imageClass,.videoClass{padding:.5rem}.imageClass figure,.videoClass figure{display:table}.imageClass figure img,.videoClass figure img{user-select:none}.imageClass figure figcaption,.videoClass figure figcaption{display:table-caption;caption-side:bottom;padding:.2rem;margin:.2rem auto;background-color:#fbcb97;color:#000}.imageClass figure figcaption::selection,.videoClass figure figcaption::selection{background-color:#e78a53}@media (max-width: 38rem){.homepage-list li a{width:100%}}footer{margin-top:2rem;color:#888}.pagination_title{width:100%;text-align:center;border-bottom:1px solid #202020;line-height:.1em;margin:2.5rem auto}.pagination_title span{background:#000;font-size:.8rem;padding:0 10px}.post_nav{display:flex;align-items:center;justify-content:center;text-align:center;margin:2.5rem auto 4rem auto}.post_nav .button{position:relative;display:inline-flex;flex:1;align-items:center;justify-content:center;overflow:hidden;text-decoration:none;margin:auto 1.5rem;font-weight:bold}.post_nav .button .previous,.post_nav .button .next{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time_tag_sep{padding:.5rem;color:#888;user-select:none}.post_tags a{padding:0 .5rem 0 0;color:#888;text-decoration:none}.post_tags a:hover{color:#fbcb97}.taxonomies__title{color:#888}.taxonomies__list a{text-decoration:none}#toc-inline,#toc-aside{font-size:90%;line-height:1.6;color:#888}#toc-inline a,#toc-aside a{color:#888;text-decoration:none}#toc-inline a:hover,#toc-aside a:hover{color:#fbcb97}#toc-inline ul,#toc-aside ul{padding-left:1rem}#toc-inline li li,#toc-aside li li{list-style:disc}#toc-inline li.active>a,#toc-aside li.active>a{color:#fbcb97;font-weight:bold}#toc-inline{font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;padding:1.25rem 0rem .5rem 0rem}#toc-inline summary:hover{cursor:pointer;color:#fbcb97}#toc-aside{font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;display:block;width:15rem;position:sticky;float:left;top:3.5rem;margin-top:-1.2rem;margin-left:-20rem}@media (max-width: 80rem){#toc-aside{display:none}}@media (min-width: 80rem){#toc-inline{display:none}}sup{line-height:0}.footnote-reference{color:#fbcb97}.footnote-reference:after{content:"]"}.footnote-reference:before{content:"["}.footnote-reference a{color:#fbcb97;text-decoration:none}hr{margin-top:2rem;margin-bottom:2rem}.footnote-definition{display:flex;flex-direction:row;font-size:.85rem}.footnote-definition sup{all:initial;color:rgba(255,255,255,.9);text-rendering:optimizeLegibility;font-variant-ligatures:contextual;font-family:cmu_serifroman,Charter,"Bitstream Charter","Sitka Text",Cambria,serif;font-weight:450;font-size:1rem;line-height:1.58;letter-spacing:-.02em;font-size:.7rem;margin:0rem;margin-right:.5rem}.footnote-definition p{margin:0rem;margin-bottom:1rem}.footnote-definition p .footnote-backlink{margin:0rem;margin-left:.5rem;color:#fbcb97;text-decoration:none}</style>

    <meta property="og:site_name" content="Gunwant Jain - @wantguns">
      <meta name="author" content="Gunwant Jain" />
      <meta name="keywords" content="Gunwant Jain, wantguns, Gunwant, WantGuns" />
      <meta property="og:title" content="Home Manager">
      <meta property="og:description" content="">
      <meta property="og:url" content="https://wantguns.dev/homemanager/">
      <meta property="og:image" content="">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:title" content="Gunwant Jain - @wantguns">
      <meta name="twitter:description" content="Gunwant Jain&#x27;s (@wantguns) writings and musings">

      <meta property="og:type" content="article" />
        <meta property="article:published_time" content="2025-03-06T00:00:00+00:00" />

      
      
    

  </head>
  

  <body>
    <main id="main" role="main">
      
      <header role="banner">
          
            
            <nav style="margin-bottom:1rem;" role="navigation">
              
                <a class="site_nav" href="https://wantguns.dev/about">about</a>
                
                  <span>&nbsp</span>
                
              
                <a class="site_nav" href="https://wantguns.dev">blog</a>
                
                  <span>&nbsp</span>
                
              
                <a class="site_nav" href="https://wantguns.dev/tags">tags</a>
                
                  <span>&nbsp</span>
                
              
                <a class="site_nav" href="https://bin.wantguns.dev/cv">resume</a>
                
                  <span>&nbsp</span>
                
              
                <a class="site_nav" href="https://wantguns.dev/atom.xml">rss</a>
                
              
            </nav>
            
          
      </header>
      


    <div>

      
<article>
  <h1 class="page_title">Home Manager</h1>

  
    <span class="page_time">Posted on <time datetime="2025-03-06T00:00:00+00:00">March 06, 2025</time></span>
    
    <span class="time_tag_sep">&middot;</span>
    <span class="post_tags">
        
            <a href="https://wantguns.dev/tags/yakshaving/">#yakshaving</a>
        
            <a href="https://wantguns.dev/tags/selfhosting/">#selfhosting</a>
        
            <a href="https://wantguns.dev/tags/nix/">#nix</a>
        
    </span>
    
  

  
  
    
    <details id = "toc-inline">
        <summary><b>Table of Contents</b></summary>
        <ul>
            <li>
                <a href="#neovim">Neovim</a>
                
            </li><li>
                <a href="#other-things">Other things</a>
                
            </li><li>
                <a href="#file-tree">File tree</a>
                
            </li><li>
                <a href="#commands">Commands</a>
                
            </li><li>
                <a href="#future">Future</a>
                
            </li>
        </ul>
    </details>

    
  <aside id="toc-aside">
          <h4>Table of Contents</h4>
      <ul>
          
          <li>
              <a href="#neovim">Neovim</a>
              
          </li>
          <li>
              <a href="#other-things">Other things</a>
              
          </li>
          <li>
              <a href="#file-tree">File tree</a>
              
          </li>
          <li>
              <a href="#commands">Commands</a>
              
          </li>
          <li>
              <a href="#future">Future</a>
              
          </li>
      </ul>
  </aside>

  
  

  <p>I am going to start hacking nix code on my macbook first. Home Manager
is a unobstrusive entry-point to the nix world. You need to first
install nix with flakes. Use the <a href="https://github.com/DeterminateSystems/nix-installer">determinate installer</a>.</p>
<p>Once thats done, create a new directory in your development folder, lets
say <code>nixhome</code>, and create a <code>flake.nix</code>:</p>
<pre data-lang="nix" style="background-color:#000000;color:#c1c1c1;" class="language-nix "><code class="language-nix" data-lang="nix"><span>{
</span><span>  </span><span style="color:#e78a53;">description = </span><span style="color:#fbcb97;">&quot;Home Manager configuration&quot;</span><span>;
</span><span>
</span><span>  </span><span style="color:#e78a53;">inputs = </span><span>{
</span><span>    </span><span style="color:#e78a53;">nixpkgs</span><span>.</span><span style="color:#e78a53;">url = </span><span style="color:#fbcb97;">&quot;github:nixos/nixpkgs/nixos-unstable&quot;</span><span>;
</span><span>    </span><span style="color:#e78a53;">home-manager = </span><span>{
</span><span>      </span><span style="color:#e78a53;">url = </span><span style="color:#fbcb97;">&quot;github:nix-community/home-manager&quot;</span><span>;
</span><span>      </span><span style="color:#e78a53;">inputs</span><span>.</span><span style="color:#e78a53;">nixpkgs</span><span>.</span><span style="color:#e78a53;">follows = </span><span style="color:#fbcb97;">&quot;nixpkgs&quot;</span><span>;
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">outputs = </span><span style="font-style:italic;color:#5f8787;">inputs</span><span>@{ </span><span style="font-style:italic;color:#5f8787;">self</span><span style="color:#e78a53;">, </span><span style="font-style:italic;color:#5f8787;">nixpkgs</span><span style="color:#e78a53;">, </span><span style="font-style:italic;color:#5f8787;">home-manager</span><span style="color:#e78a53;">, ... </span><span>}:
</span><span>    </span><span style="color:#e78a53;">let
</span><span>      </span><span style="color:#e78a53;">system = </span><span style="color:#fbcb97;">&quot;x86_64-darwin&quot;</span><span>;
</span><span>      </span><span style="color:#e78a53;">pkgs = </span><span style="font-style:italic;color:#5f8787;">nixpkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">legacyPackages</span><span style="color:#e78a53;">.</span><span>${</span><span style="font-style:italic;color:#5f8787;">system</span><span>};
</span><span>    </span><span style="color:#e78a53;">in </span><span>{
</span><span>      </span><span style="color:#e78a53;">homeConfigurations</span><span>.</span><span style="color:#fbcb97;">&quot;play&quot; </span><span style="color:#e78a53;">= </span><span style="font-style:italic;color:#5f8787;">home-manager</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">homeManagerConfiguration </span><span>{
</span><span>        </span><span style="color:#e78a53;">inherit pkgs</span><span>;
</span><span>        </span><span style="color:#e78a53;">modules = </span><span>[
</span><span>          </span><span style="color:#fbcb97;">./home.nix
</span><span>        ];
</span><span>      };
</span><span>    };
</span><span>}
</span></code></pre>
<p>and a <code>home.nix</code> file:</p>
<pre data-lang="nix" style="background-color:#000000;color:#c1c1c1;" class="language-nix "><code class="language-nix" data-lang="nix"><span>{ </span><span style="font-style:italic;color:#5f8787;">config</span><span style="color:#e78a53;">, </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">, </span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">, ... </span><span>}:
</span><span>
</span><span style="color:#e78a53;">let
</span><span>  </span><span style="color:#e78a53;">toLua = </span><span style="font-style:italic;color:#5f8787;">str</span><span>: </span><span style="color:#fbcb97;">&quot;</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">lua &lt;&lt; EOF</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">${</span><span style="font-style:italic;color:#5f8787;">str</span><span style="color:#fbcb97;">}</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">EOF&quot;</span><span>;
</span><span>  </span><span style="color:#e78a53;">toLuaFile = </span><span style="font-style:italic;color:#5f8787;">file</span><span>: </span><span style="color:#fbcb97;">&quot;</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">lua &lt;&lt; EOF</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">${</span><span style="color:#e78a53;">builtins.</span><span style="font-style:italic;color:#5f8787;">readFile file</span><span style="color:#fbcb97;">}</span><span style="color:#aaaaaa;">\n</span><span style="color:#fbcb97;">EOF&quot;</span><span>;
</span><span>
</span><span>  </span><span style="color:#e78a53;">fromGitHub =
</span><span>    {
</span><span>      </span><span style="font-style:italic;color:#5f8787;">ref</span><span style="color:#e78a53;">,
</span><span>      </span><span style="font-style:italic;color:#5f8787;">repo</span><span style="color:#e78a53;">,
</span><span>      </span><span style="font-style:italic;color:#5f8787;">sha256 </span><span style="color:#e78a53;">? </span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">fakeSha256</span><span style="color:#e78a53;">,
</span><span>    }:
</span><span>    </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">vimUtils</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">buildVimPlugin </span><span>{
</span><span>      </span><span style="color:#e78a53;">pname = </span><span style="color:#fbcb97;">&quot;${</span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">strings</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">sanitizeDerivationName repo</span><span style="color:#fbcb97;">}&quot;</span><span>;
</span><span>      </span><span style="color:#e78a53;">version = </span><span style="font-style:italic;color:#5f8787;">ref</span><span>;
</span><span>      </span><span style="color:#e78a53;">src = </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">fetchFromGitHub </span><span>{
</span><span>        </span><span style="color:#e78a53;">owner = </span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">strings</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">elemAt </span><span>(</span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">strings</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">splitString </span><span style="color:#fbcb97;">&quot;/&quot; </span><span style="font-style:italic;color:#5f8787;">repo</span><span>) </span><span style="color:#e78a53;">0</span><span>;
</span><span>        </span><span style="color:#e78a53;">repo = </span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">strings</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">elemAt </span><span>(</span><span style="font-style:italic;color:#5f8787;">lib</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">strings</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">splitString </span><span style="color:#fbcb97;">&quot;/&quot; </span><span style="font-style:italic;color:#5f8787;">repo</span><span>) </span><span style="color:#e78a53;">1</span><span>;
</span><span>        </span><span style="color:#e78a53;">rev = </span><span style="font-style:italic;color:#5f8787;">ref</span><span>;
</span><span>        </span><span style="color:#e78a53;">sha256 = </span><span style="font-style:italic;color:#5f8787;">sha256</span><span>;
</span><span>      };
</span><span>    };
</span><span>
</span><span>  </span><span style="color:#e78a53;">fakeVimPlugin = </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">runCommand </span><span style="color:#fbcb97;">&quot;fakeVimPlugin&quot; </span><span>{ } </span><span style="color:#fbcb97;">&quot;mkdir $out&quot;</span><span>;
</span><span style="color:#e78a53;">in
</span><span>
</span><span>{
</span><span>  </span><span style="color:#e78a53;">nixpkgs = </span><span>{
</span><span>    </span><span style="color:#e78a53;">config = </span><span>{
</span><span>      </span><span style="color:#e78a53;">allowUnfree = true</span><span>;
</span><span>      </span><span style="color:#e78a53;">allowUnfreePredicate = </span><span>(</span><span style="font-style:italic;color:#5f8787;">_</span><span>: </span><span style="color:#e78a53;">true</span><span>);
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">home</span><span>.</span><span style="color:#e78a53;">username = </span><span style="color:#fbcb97;">&quot;&lt;username&gt;&quot;</span><span>;
</span><span>  </span><span style="color:#e78a53;">home</span><span>.</span><span style="color:#e78a53;">homeDirectory = </span><span style="color:#fbcb97;">&quot;/Users/&lt;username&gt;&quot;</span><span>;
</span><span>
</span><span>  </span><span style="color:#e78a53;">home</span><span>.</span><span style="color:#e78a53;">stateVersion = </span><span style="color:#fbcb97;">&quot;24.11&quot;</span><span>;
</span><span>  </span><span style="color:#e78a53;">home</span><span>.</span><span style="color:#e78a53;">packages = </span><span>[
</span><span>    </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">ripgrep
</span><span>    </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">neofetch
</span><span>  ];
</span><span>
</span><span>  </span><span style="color:#e78a53;">home</span><span>.</span><span style="color:#e78a53;">file = </span><span>{
</span><span>    </span><span style="color:#fbcb97;">&quot;.p10k.zsh&quot;</span><span>.</span><span style="color:#e78a53;">source = </span><span style="color:#fbcb97;">./zsh/p10k.zsh</span><span>;
</span><span>    </span><span style="color:#fbcb97;">&quot;.config/git/message&quot;</span><span>.</span><span style="color:#e78a53;">source = </span><span style="color:#fbcb97;">./git/message</span><span>;
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">fonts</span><span>.</span><span style="color:#e78a53;">fontconfig</span><span>.</span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>  </span><span style="color:#e78a53;">programs</span><span>.</span><span style="color:#e78a53;">home-manager</span><span>.</span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>
</span><span>  </span><span style="color:#e78a53;">programs</span><span>.</span><span style="color:#e78a53;">zsh = </span><span>{
</span><span>    </span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">syntaxHighlighting</span><span>.</span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">autosuggestion</span><span>.</span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">enableCompletion = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">defaultKeymap = </span><span style="color:#fbcb97;">&quot;viins&quot;</span><span>;
</span><span>
</span><span>    </span><span style="color:#e78a53;">completionInit = </span><span style="color:#fbcb97;">&#39;&#39;autoload -U compinit &amp;&amp; compinit -u&#39;&#39;</span><span>;
</span><span>
</span><span>    </span><span style="color:#e78a53;">history = </span><span>{
</span><span>      </span><span style="color:#e78a53;">append = true</span><span>;
</span><span>      </span><span style="color:#e78a53;">extended = true</span><span>;
</span><span>      </span><span style="color:#e78a53;">size = 10000</span><span>;
</span><span>      </span><span style="color:#e78a53;">save = 1000000</span><span>;
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#e78a53;">initExtraFirst = builtins.</span><span style="font-style:italic;color:#5f8787;">readFile </span><span style="color:#fbcb97;">./zsh/zshrc</span><span>;
</span><span>
</span><span>    </span><span style="color:#e78a53;">plugins = </span><span>[
</span><span>      {
</span><span>        </span><span style="color:#e78a53;">name = </span><span style="color:#fbcb97;">&quot;zsh-powerlevel10k&quot;</span><span>;
</span><span>        </span><span style="color:#e78a53;">src = </span><span style="color:#fbcb97;">&quot;${</span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">zsh-powerlevel10k</span><span style="color:#fbcb97;">}/share/zsh-powerlevel10k/&quot;</span><span>;
</span><span>        </span><span style="color:#e78a53;">file = </span><span style="color:#fbcb97;">&quot;powerlevel10k.zsh-theme&quot;</span><span>;
</span><span>      }
</span><span>    ]; 
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">programs</span><span>.</span><span style="color:#e78a53;">tmux = </span><span>{
</span><span>    </span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">extraConfig = builtins.</span><span style="font-style:italic;color:#5f8787;">readFile </span><span style="color:#fbcb97;">./tmux/tmux.conf</span><span>;
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">programs</span><span>.</span><span style="color:#e78a53;">git = </span><span>{
</span><span>    </span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">extraConfig = builtins.</span><span style="font-style:italic;color:#5f8787;">readFile </span><span style="color:#fbcb97;">./git/config</span><span>;
</span><span>    </span><span style="color:#e78a53;">delta</span><span>.</span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#e78a53;">programs</span><span>.</span><span style="color:#e78a53;">neovim = </span><span>{
</span><span>    </span><span style="color:#e78a53;">enable = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">defaultEditor = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">viAlias = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">vimAlias = true</span><span>;
</span><span>    </span><span style="color:#e78a53;">vimdiffAlias = true</span><span>;
</span><span>
</span><span>    </span><span style="color:#e78a53;">plugins = with </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">vimPlugins</span><span>; [
</span><span>
</span><span>      {
</span><span>        </span><span style="color:#e78a53;">plugin = </span><span style="font-style:italic;color:#5f8787;">fakeVimPlugin</span><span>;
</span><span>        </span><span style="color:#e78a53;">config = </span><span style="font-style:italic;color:#5f8787;">toLuaFile </span><span style="color:#fbcb97;">./nvim/base.lua</span><span>;
</span><span>      }
</span><span>
</span><span>      </span><span style="font-style:italic;color:#5f8787;">plenary-nvim
</span><span>      </span><span style="font-style:italic;color:#5f8787;">which-key-nvim
</span><span>      </span><span style="font-style:italic;color:#5f8787;">copilot-vim
</span><span>
</span><span>      {
</span><span>        </span><span style="color:#e78a53;">plugin = </span><span style="font-style:italic;color:#5f8787;">nvim-treesitter</span><span style="color:#e78a53;">.</span><span style="font-style:italic;color:#5f8787;">withAllGrammars</span><span>;
</span><span>        </span><span style="color:#e78a53;">config = </span><span style="font-style:italic;color:#5f8787;">toLuaFile </span><span style="color:#fbcb97;">./nvim/treesitter.lua</span><span>;
</span><span>      }
</span><span>
</span><span>      {
</span><span>        </span><span style="color:#e78a53;">plugin = </span><span>(
</span><span>          </span><span style="font-style:italic;color:#5f8787;">fromGitHub </span><span>{
</span><span>            </span><span style="color:#e78a53;">ref = </span><span style="color:#fbcb97;">&quot;HEAD&quot;</span><span>;
</span><span>            </span><span style="color:#e78a53;">repo = </span><span style="color:#fbcb97;">&quot;bluz71/vim-moonfly-colors&quot;</span><span>;
</span><span>            </span><span style="color:#e78a53;">sha256 = </span><span style="color:#fbcb97;">&quot;c5fxaT8Bc5MzOjJsuU95K9yzTpGqj/7QP4GuLfsY4VE=&quot;</span><span>;
</span><span>          }
</span><span>        );
</span><span>        </span><span style="color:#e78a53;">config = </span><span style="color:#fbcb97;">&quot;colorscheme moonfly&quot;</span><span>;
</span><span>      }
</span><span>
</span><span>      </span><span style="color:#888888;"># Redacted list of plugins ...
</span><span>    ];
</span><span>
</span><span>    </span><span style="color:#e78a53;">extraPackages = with </span><span style="font-style:italic;color:#5f8787;">pkgs</span><span>; [
</span><span>      </span><span style="font-style:italic;color:#5f8787;">gopls
</span><span>      </span><span style="font-style:italic;color:#5f8787;">pyright
</span><span>    ];
</span><span>  };
</span><span>}
</span></code></pre>
<h3 id="neovim">Neovim</h3>
<p>In the <code>home.nix</code> file, you can see that we defined three functions which
are used to activate three types of vim plugins:</p>
<ul>
<li>Ones which do not need any further configuration, like plenary</li>
<li>Ones which do need a lua config to function well, like treesitter</li>
<li>Ones which do not exist on the nixpkg store currently</li>
<li>Also I wanted to append these configs in the order of the plugins, and
<code>programs.neovim.extraconfig</code> added the config at the end of the .vim
config file. So i created a fakeVimPlugin and injected a base config in
order.</li>
</ul>
<h3 id="other-things">Other things</h3>
<p>Home manager has a rich set of options to explore. I am currently using also
aerc and alacritty through it.</p>
<h2 id="file-tree">File tree</h2>
<p>This is the final state of my flake folder:</p>
<pre style="background-color:#000000;color:#c1c1c1;"><code><span>├── flake.nix
</span><span>├── flake.lock
</span><span>├── git
</span><span>│   ├── config
</span><span>│   ├── message
</span><span>├── home.nix
</span><span>├── nvim
</span><span>│   ├── base.lua
</span><span>│   └── treesitter.lua
</span><span>├── tmux
</span><span>│   └── tmux.conf
</span><span>└── zsh
</span><span>    ├── p10k.zsh
</span><span>    └── zshrc
</span></code></pre>
<h2 id="commands">Commands</h2>
<p>To apply this config, you can either just build it with the flake as an
app or just use the binary in a nix-shell:</p>
<pre data-lang="bash" style="background-color:#000000;color:#c1c1c1;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#5f8787;">home-manager</span><span> switch</span><span style="font-style:italic;color:#5f8787;"> --flake</span><span> .#play
</span></code></pre>
<p>Home manager maintains a list of generations and adds one whenever you
switch to a new nix output. You can easily rollback on switches.</p>
<h2 id="future">Future</h2>
<p>Home manager is nice and unobtrusive piece of software which is fine for
setting up on foreign hosts. Let's move ahead and integrate home-manager
with <code>nix-darwin</code> to also make system level changes.</p>

</article>


  <div class="pagination_title">
    <span>Read other posts</span>
  </div>
  <div class="post_nav">
      
        <div class="button">
          <a class="button" href="&#x2F;yakshaving&#x2F;">
            ←&nbsp;
            <span class="next">
              Setting up my homelab and cloud with Nix
            </span>
          </a>
        </div>
      
      
        <div class="button">
          <a class="button" href="&#x2F;nixdarwin&#x2F;">
            <span class="previous">Nix Darwin</span>
            &nbsp;→
          </a>
        </div>
      
    </div>



    </div>
    </main>

    
    

    <footer class=center>
      <sub>
        <div>
            &copy;
            <span id="copyright">
                <script>document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))</script>
            </span>
            &middot;
            Gunwant Jain. Built <a class="footer" href="https://github.com/wantguns/wantguns.dev">openly</a> with <a class="footer" href="https://www.getzola.org">Zola</a>
        </div>
      </sub>
    </footer>
  </body>
  
 <script src=https://wantguns.dev/js/page.js></script> 

</html>
